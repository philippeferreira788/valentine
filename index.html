<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pour mon bibi ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg1:#ffe6f0;
      --bg2:#ffd1e3;
      --pink:#ff4d88;
      --pink2:#ff66a3;
      --text:#2b2b2b;
      --card:#ffffffcc;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
    }

    *{ box-sizing:border-box; }
    body {
    margin: 0;
    min-height: 100svh;
    display: grid;
    place-items: center;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: white;

    background: 
        linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)),
        url("background.jpg");

    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

    .card{
      width:min(720px, 92vw);
      padding:28px 22px;
      border-radius:24px;
      background:var(--card);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.6);
      text-align:center;
      position:relative;
    }

    h1{
      margin:10px 0 8px;
      font-size: clamp(26px, 4.2vw, 42px);
      color:var(--pink);
      letter-spacing:.2px;
    }
    p{
      margin:0 0 18px;
      font-size: clamp(14px, 2.3vw, 18px);
      opacity:.9;
    }

    .btns{
      margin-top:18px;
      display:flex;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
      position:relative;
      min-height:92px; /* laisse de la place au bouton "Non" qui bouge */
    }

    button{
      border:0;
      padding:14px 22px;
      font-size:18px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: scale(.98); }

    #yes{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
    }
    #yes:hover{ filter: brightness(1.05); }

    #no{
      background: #808080;
      color:#fff;
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(120px, -50%);
    }

    .hint{
      font-size: 13px;
      opacity:.75;
      margin-top:12px;
    }

    .badge{
      position:absolute;
      top:14px;
      right:14px;
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      background:#ffffffb5;
      border:1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }

    /* pluie de coeurs */
    .heart{
      position:fixed;
      top:-40px;
      font-size: 22px;
      animation: fall linear forwards;
      opacity:.9;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
      pointer-events:none;
    }
    @keyframes fall{
      to{
        transform: translate(var(--dx), 110svh) rotate(var(--rot));
        opacity: 0.9;
      }
    }

    /* overlay "oui" */
    .overlay{
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      background: rgba(255, 230, 240, .55);
      backdrop-filter: blur(8px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .overlay.show{
      opacity:1;
      pointer-events:auto;
    }
    .overlay .box{
      width:min(680px, 92vw);
      background:#fff;
      border-radius:26px;
      padding:26px 22px;
      box-shadow: var(--shadow);
      text-align:center;
      border: 1px solid rgba(0,0,0,.06);
    }
    .overlay h2{
      margin:0 0 8px;
      font-size: clamp(22px, 3.6vw, 34px);
      color: var(--pink);
    }
    .overlay .sub{
      margin:0 0 16px;
      font-size: clamp(14px, 2.3vw, 18px);
      opacity:.85;
    }
    .small-btn{
      margin-top:12px;
      background:#f2f2f2;
      color:#222;
      box-shadow:none;
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="badge">üíñ Pour mon bibi</div>
    <h1>Mon bibi, veux-tu √™tre ma valentine ? üíò</h1>
    <p>R√©ponds bien‚Ä¶ il y a une bonne r√©ponse üòá</p>

    <div class="btns" id="arena">
      <button id="yes">Oui ‚ù§Ô∏è</button>
      <button id="no">Non üôÉ</button>
    </div>

    <div class="hint">üéµ Astuce : clique quelque part pour activer le son.</div>
  </div>

  <div class="overlay" id="overlay">
    <div class="box">
      <h2>OUUUUUIIIII üíû</h2>
      <p class="sub">Je savais que tu allais dire oui üòç<br/>RDV samedi pour un date trop mignon (avec le Milk) ‚ú®</p>
      <button class="small-btn" id="close">OK ü•∞</button>
    </div>
  </div>

  <!-- Musique (mets un fichier "music.mp3" √† la racine du repo) -->
  <audio id="music" loop preload="auto">
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Confettis -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <script>
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const arena = document.getElementById("arena");
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("close");
    const music = document.getElementById("music");

    // 1) Musique: d√©marre au premier clic/tap (obligatoire sur mobile)
    let musicStarted = false;
    const startMusicOnce = async () => {
      if (musicStarted) return;
      musicStarted = true;
      try { await music.play(); } catch(e) { /* si bloqu√©, tant pis */ }
      document.removeEventListener("pointerdown", startMusicOnce);
    };
    document.addEventListener("pointerdown", startMusicOnce, { once: true });

    // 2) Pluie de coeurs
    const heartEmojis = ["üíñ","üíò","üíù","üíï","üíû","‚ù§Ô∏è","üòç","üòò"];
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
      const x = Math.random() * 100;
      const size = 16 + Math.random()*18;
      const dur = 3.5 + Math.random()*3.5;
      const dx = (Math.random() * 2 - 1) * 120 + "px";
      const rot = (Math.random() * 2 - 1) * 90 + "deg";
      h.style.left = x + "vw";
      h.style.fontSize = size + "px";
      h.style.setProperty("--dx", dx);
      h.style.setProperty("--rot", rot);
      h.style.animationDuration = dur + "s";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), dur * 1000 + 200);
    }
    setInterval(spawnHeart, 220);

    // 3) Bouton "Non" qui fuit (souris + tactile)
    function moveNoButton(){
      const rect = arena.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // limites (√©vite de sortir du cadre)
      const padding = 10;
      const maxX = rect.width - btnRect.width - padding;
      const maxY = rect.height - btnRect.height - padding;

      const x = padding + Math.random() * Math.max(0, maxX - padding);
      const y = padding + Math.random() * Math.max(0, maxY - padding);

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      noBtn.style.transform = "translate(0,0)";
    }

    // Desktop
    noBtn.addEventListener("mouseover", moveNoButton);

    // Mobile (quand elle essaie de toucher)
    noBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      moveNoButton();
    });

    // 4) Click Oui: confettis + overlay
    yesBtn.addEventListener("click", () => {
      // confettis (coeurs)
      confetti({
        particleCount: 140,
        spread: 70,
        origin: { y: 0.65 }
      });
      confetti({
        particleCount: 70,
        spread: 120,
        origin: { y: 0.55 }
      });

      overlay.classList.add("show");
      // boost coeurs pendant 2s
      const burst = setInterval(() => { for(let i=0;i<3;i++) spawnHeart(); }, 80);
      setTimeout(() => clearInterval(burst), 2000);
    });

    closeBtn.addEventListener("click", () => overlay.classList.remove("show"));

    // position initiale du "Non" adapt√©e aux tailles d‚Äô√©cran
    const placeInitial = () => {
      // position al√©atoire au d√©part (dans l‚Äôar√®ne)
      moveNoButton();
    };
    window.addEventListener("resize", placeInitial);
    placeInitial();
  </script>
</body>
</html>
